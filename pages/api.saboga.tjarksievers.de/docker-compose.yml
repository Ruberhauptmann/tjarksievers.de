version: '3.8'

services:
  api:
    image: registry.gitlab.com/ruberhauptmann/sabogaapi/sabogaapi:latest
    container_name: saboga-api
    labels:
      - "traefik.http.routers.api.rule=Host(`api.saboga.tjarksievers.de`)"
    expose:
      - "8000"
    depends_on:
      - reverse-proxy
    env_file:
      - pages/api.saboga.tjarksievers.de/.env
    networks:
      - saboga-api
      - reverse-proxy

  database:
    image: mariadb:latest
    container_name: saboga-database
    volumes:
      - mariadb-data:/var/lib/mysql
    env_file:
      - pages/api.saboga.tjarksievers.de/.env
    networks:
      - saboga-api

volumes:
  mariadb-data:
networks:
  saboga-api:
    name: saboga-api
    driver: bridge
